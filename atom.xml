<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="https://www.w3.org/2005/Atom">
  <title>指尖脚尖记忆间</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-11-24T16:14:18.690Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>沙蒿</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>归来仍是少年</title>
    <link href="http://yoursite.com/2019/11/25/%E5%BD%92%E6%9D%A5%E4%BB%8D%E6%98%AF%E5%B0%91%E5%B9%B4/"/>
    <id>http://yoursite.com/2019/11/25/%E5%BD%92%E6%9D%A5%E4%BB%8D%E6%98%AF%E5%B0%91%E5%B9%B4/</id>
    <published>2019-11-24T16:09:37.000Z</published>
    <updated>2019-11-24T16:14:18.690Z</updated>
    
    <content type="html"><![CDATA[<p>由于公司的调休制度修改，导致了我十几天的调休假没法转换成工资，在跟领导沟通完后，我休息了两天，加上周末共四天假期，一场没有计划的旅途就这样开始了，可能是为了逃避城市压抑的生活，可能是想念大学的那一缕阳光，我回到了母校，回到了梦开始的地方。<br><img src="https://upload-images.jianshu.io/upload_images/7429691-03b85b39706e2353.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="校门.jpg"><br>经过近两个小时的车程，我到达了学校北门。下车的那一刻，心情是复杂的，压抑的心在这一刻稍变舒坦，路过校门、篮球场、操场，我不停的问自己，我为什么要来到这里，我已经毕业了，这里没有昔日的战友，你已不属于这里，家在广州的你还有一大堆事情需要你帮忙，你却逃离回来，这是何苦呢？想想不禁热泪盈眶。<br><img src="https://upload-images.jianshu.io/upload_images/7429691-40751bdabccd270f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="操场.jpg"></p><a id="more"></a><p>打开微信，发了个消息给老师，还好老师刚好有空，我们一起坐下来聊聊技术、聊聊工作、聊聊生活，虽然之前一直吐槽他，但却是我的良师益友，至少得到了老师的理解和关怀。</p><p>晚上借助在舍友家中，吃了顿丰盛的夜宵。果然，一分价钱一分货，隔天肚子有点闹腾，但还是吃得很开心。<br><img src="https://upload-images.jianshu.io/upload_images/7429691-4f667f2ef781a8c9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="夜宵.jpg"></p><p>次天傍晚，本无计划的我，受到老友的邀请，去了躺莞城的工模，见了大一喜欢的那个女生。也就是因为这个我才会愿意一路颠簸两个多小时公交。我们聊了很多，话题从工作到小孩教育，从过去到现在，一起在校园里回忆那些年我们一起走过、做过、开心过的事情。她是我大学喜欢过的一个女生，表白被拒绝过，可能是因为我不够优秀（帅），当面她只是简单的说了一句“我还不想谈恋爱”。大学四年，我谈过一次恋爱，而现在对她的感觉少了些年轻时的冲动，更多是理解和帮助。当然我还是喜欢她。（我不是渣男）<br><img src="https://upload-images.jianshu.io/upload_images/7429691-2306420c8aa8fb5e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="我她合照.jpg"></p><p>第三日，是约定好攀登东莞最高峰银瓶嘴的日子。过程是痛苦、是艰难的，每一个台阶每一滴汗，都是酸咸苦辣的，然而当我登上顶的那一刻，结果就没有那么重要了.</p><p><img src="https://upload-images.jianshu.io/upload_images/7429691-7f05bdcc1ef8bb7a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="车票.jpg"></p><p><img src="https://upload-images.jianshu.io/upload_images/7429691-3eb3475b095c99c3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="合照.jpg"><br>一个五块钱的老冰棍却能带给我百元的快乐。从上往下看，生与死就在那一脚，外面的生活还是蛮精彩，工作的不愉快已经没有那么重要了，那就努力赚钱多出来走走吧。</p><p><img src="https://upload-images.jianshu.io/upload_images/7429691-efbe8ce0775afdc0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="山脚.jpg"></p><p>“不畏浮云遮望眼，只缘生在最高层”，加油吧少年。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;由于公司的调休制度修改，导致了我十几天的调休假没法转换成工资，在跟领导沟通完后，我休息了两天，加上周末共四天假期，一场没有计划的旅途就这样开始了，可能是为了逃避城市压抑的生活，可能是想念大学的那一缕阳光，我回到了母校，回到了梦开始的地方。&lt;br&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-03b85b39706e2353.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;校门.jpg&quot;&gt;&lt;br&gt;经过近两个小时的车程，我到达了学校北门。下车的那一刻，心情是复杂的，压抑的心在这一刻稍变舒坦，路过校门、篮球场、操场，我不停的问自己，我为什么要来到这里，我已经毕业了，这里没有昔日的战友，你已不属于这里，家在广州的你还有一大堆事情需要你帮忙，你却逃离回来，这是何苦呢？想想不禁热泪盈眶。&lt;br&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-40751bdabccd270f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;操场.jpg&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="旅途" scheme="http://yoursite.com/tags/%E6%97%85%E9%80%94/"/>
    
  </entry>
  
  <entry>
    <title>互联网项目开发流程规范</title>
    <link href="http://yoursite.com/2019/11/10/%E4%BA%92%E8%81%94%E7%BD%91%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E8%A7%84%E8%8C%83/"/>
    <id>http://yoursite.com/2019/11/10/%E4%BA%92%E8%81%94%E7%BD%91%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E8%A7%84%E8%8C%83/</id>
    <published>2019-11-10T14:31:02.000Z</published>
    <updated>2019-11-18T06:17:15.856Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p>今天分享一下项目开发过程中规范流程的一张图，流程、文字说明都在图上。</p><p><img src="https://upload-images.jianshu.io/upload_images/7429691-9c7f5804051169ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="产品开发流程图.png"></p><p>如果跟你们公司开发过程中有不一样的地方，欢迎下发留言哈。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;p&gt;今天分享一下项目开发过程中规范流程的一张图，流程、文字说明都在图上。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_im
      
    
    </summary>
    
    
    
      <category term="版本控制" scheme="http://yoursite.com/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>git项目版本控制流程规范梳理</title>
    <link href="http://yoursite.com/2019/11/08/git%E9%A1%B9%E7%9B%AE%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B%E8%A7%84%E8%8C%83%E6%A2%B3%E7%90%86/"/>
    <id>http://yoursite.com/2019/11/08/git%E9%A1%B9%E7%9B%AE%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B%E8%A7%84%E8%8C%83%E6%A2%B3%E7%90%86/</id>
    <published>2019-11-08T14:22:48.000Z</published>
    <updated>2019-11-18T05:59:02.870Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h3 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h3><p><img src="https://upload-images.jianshu.io/upload_images/7429691-caa1a148645bc944.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="git版本控制"></p><h3 id="常见的分支"><a href="#常见的分支" class="headerlink" title="常见的分支"></a>常见的分支</h3><ul><li><strong>master：</strong>上线分支，每一个版本需要打上一个tag标签。每一个版本更新的内容可多可细，tag1.2.3，第一位数字1是系统更新的大版本，数字2是更新的大功能点，数字3是可以是优化、可以是修复、可以是小功能点。</li><li><strong>develop：</strong>开发分支，是当前项目的可进行测试的最新代码，每一次开发人员开发的新功能、bug、优化都需要合并同步更新到develop分支；此分支也是测试同学测试功能的分支。</li><li><strong>功能A（B/C）：</strong>功能分支，开发人员在develop拉出来进行具体功能点开发的分支。</li><li><strong>bug_fix：</strong>修复分支，线上版本出来紧急bug，拉出来的进行修复bug的分支。修复完后需要同步更新代码到develop分支。</li></ul><a id="more"></a><h3 id="环境介绍"><a href="#环境介绍" class="headerlink" title="环境介绍"></a>环境介绍</h3><p>一般一个项目部署的环境至少有本地环境、dev开发环境、fat环境、线上环境，只是最最基本的几个环境。</p><ul><li><strong>本地环境：</strong>不用介绍了吧这个，你的电脑虚拟机环境。【可以理解为<strong>本地的</strong>git版本】</li><li><strong>dev环境：</strong>开发自测、联调的环境【可以理解为开发对<strong>功能A（B/C）</strong>自测的环境】</li><li><strong>fat环境：</strong>测试用例测试和验证的环境【可以理解为<strong>develop分支</strong>部署，专门做上线前，测试验证、保证产品这里的测试环境】</li><li><strong>线上环境：</strong>给用户使用的正式环境【可以理解为<strong>master分支</strong>部署的环境】<br>当然，公司越大、项目越大、业务链路越复杂越长的用于开发、调试、使用的环境也就更多。可能会多一个<strong>sit环境（集成测试环境）、uat环境（预发布环境）</strong></li></ul><h3 id="开发流程"><a href="#开发流程" class="headerlink" title="开发流程"></a>开发流程</h3><p>我们就从新建一个项目开始和整个开发过程需要学习和熟练的版本控制内容。</p><hr><p>未完待续，或者您可以下方留言常见问题。</p>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;h3 id=&quot;流程图&quot;&gt;&lt;a href=&quot;#流程图&quot; class=&quot;headerlink&quot; title=&quot;流程图&quot;&gt;&lt;/a&gt;流程图&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-caa1a148645bc944.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;git版本控制&quot;&gt;&lt;/p&gt;&lt;h3 id=&quot;常见的分支&quot;&gt;&lt;a href=&quot;#常见的分支&quot; class=&quot;headerlink&quot; title=&quot;常见的分支&quot;&gt;&lt;/a&gt;常见的分支&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;master：&lt;/strong&gt;上线分支，每一个版本需要打上一个tag标签。每一个版本更新的内容可多可细，tag1.2.3，第一位数字1是系统更新的大版本，数字2是更新的大功能点，数字3是可以是优化、可以是修复、可以是小功能点。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;develop：&lt;/strong&gt;开发分支，是当前项目的可进行测试的最新代码，每一次开发人员开发的新功能、bug、优化都需要合并同步更新到develop分支；此分支也是测试同学测试功能的分支。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;功能A（B/C）：&lt;/strong&gt;功能分支，开发人员在develop拉出来进行具体功能点开发的分支。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;bug_fix：&lt;/strong&gt;修复分支，线上版本出来紧急bug，拉出来的进行修复bug的分支。修复完后需要同步更新代码到develop分支。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="版本控制" scheme="http://yoursite.com/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>第三方平台代小程序（公众号）业务常见错误</title>
    <link href="http://yoursite.com/2019/11/07/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0%E4%BB%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%EF%BC%88%E5%85%AC%E4%BC%97%E5%8F%B7%EF%BC%89%E4%B8%9A%E5%8A%A1%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF/"/>
    <id>http://yoursite.com/2019/11/07/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0%E4%BB%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%EF%BC%88%E5%85%AC%E4%BC%97%E5%8F%B7%EF%BC%89%E4%B8%9A%E5%8A%A1%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF/</id>
    <published>2019-11-07T15:38:16.000Z</published>
    <updated>2019-11-18T06:20:00.568Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p><img src="https://upload-images.jianshu.io/upload_images/7429691-70d1c79d596ae7a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="第三方平台接入"></p><ul><li><strong>component is not authorized by this account hint: [BZcV0a01294731]</strong></li></ul><p><strong>原因：</strong>公众号（小程序）未授权，<br><strong>解决：</strong>重新将其在授权给第三方应用就好了。</p><ul><li><strong>40001：invalid credential, access_token is invalid or not latest hint: [0947szc5!]</strong></li></ul><a id="more"></a><p><strong>原因：</strong>access_token无效或失效，<br><strong>解决：</strong>检查一下token是否正确；调用刷新token的接口，去拿到最新的token。</p><ul><li><strong>43001：require GET method hint: [yaNjnA01103955]</strong></li></ul><p><strong>原因：</strong>请求方式不出错，<br><strong>解决：</strong>查看文档接口请求方式，更换为post</p><ul><li><strong>61004：access clientip is not registered requestIP: 112.94.43.29 hint: [c7.QhA02174679!]</strong></li></ul><p><strong>原因：</strong>不在ip白名单内，<br><strong>解决：</strong>去第三方平台应用添加白名单IP地址列表</p><ul><li><strong>48001：api unauthorized hint: [qptaQa0711szb1!]</strong></li></ul><p><strong>原因：</strong>api功能未授权，<br><strong>解决：</strong>先确认是否有api权限，其次，查看你是不是把小程序的access_token拿去调用公众号的接口，或者反过来，或拿了第三方平台的token，反正就是你搞错了token。</p><ul><li><strong>47001：data format error hint: [2RnK01554870]</strong></li></ul><p><strong>原因：</strong>请求的数据格式有问题，可能是少了字段，可能是多了不必要的字段，可能是json字符串你传了json对象，</p><p><strong>解决：</strong>多看几遍微信的官方文档，检查自己的代码是否按照要求传参。</p><ul><li><strong>40066：invalid url hint: [l4ZooA0366z199!]</strong></li></ul><p><strong>原因：</strong>请求的url错了，可能是你从官网上复制的url就多了一个空格，可能你代码多了行回车，<br><strong>解决：</strong>检查自己的代码url是否正确。</p><ul><li><strong>89000：account has bound open hint: [aiYGTA0779sha1]</strong></li></ul><p><strong>原因：</strong>该公众号（小程序）已绑定了开发者账号，<br><strong>解决</strong>：登录公众号平台，查看绑定的开发者账号open_appid是多少，可以选择先调用解绑接口进行解绑，或直接在数据库插入旧的open_appid，不创建新的open_appid。</p><ul><li><strong>85001：user not exist or user cannot be searched hint: [Z4H.dA01174245]</strong></li></ul><p><strong>原因：</strong>添加小程序的体验者微信号不存在，或他关闭了被搜索到的功能，设置了权限，<br><strong>解决：</strong>输入对的微信号，或让他打开权限。</p><hr><p><strong>不要问我为什么知道这么多，全都是踩过的坑。如果您还遇到别的坑，请下方留言，来帮帮孩子</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-70d1c79d596ae7a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;第三方平台接入&quot;&gt;&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;component is not authorized by this account hint: [BZcV0a01294731]&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;原因：&lt;/strong&gt;公众号（小程序）未授权，&lt;br&gt;&lt;strong&gt;解决：&lt;/strong&gt;重新将其在授权给第三方应用就好了。&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;40001：invalid credential, access_token is invalid or not latest hint: [0947szc5!]&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="微信第三方平台" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0/"/>
    
  </entry>
  
  <entry>
    <title>小程序（公众号）授权给第三方平台流程梳理和实现</title>
    <link href="http://yoursite.com/2019/11/06/%E5%B0%8F%E7%A8%8B%E5%BA%8F%EF%BC%88%E5%85%AC%E4%BC%97%E5%8F%B7%EF%BC%89%E6%8E%88%E6%9D%83%E7%BB%99%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0%E6%B5%81%E7%A8%8B%E6%A2%B3%E7%90%86%E5%92%8C%E5%AE%9E%E7%8E%B0/"/>
    <id>http://yoursite.com/2019/11/06/%E5%B0%8F%E7%A8%8B%E5%BA%8F%EF%BC%88%E5%85%AC%E4%BC%97%E5%8F%B7%EF%BC%89%E6%8E%88%E6%9D%83%E7%BB%99%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0%E6%B5%81%E7%A8%8B%E6%A2%B3%E7%90%86%E5%92%8C%E5%AE%9E%E7%8E%B0/</id>
    <published>2019-11-06T15:39:55.000Z</published>
    <updated>2019-11-18T06:17:29.345Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p><img src="https://upload-images.jianshu.io/upload_images/7429691-253978f27f3ebf96.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><h3 id="整体流程"><a href="#整体流程" class="headerlink" title="整体流程"></a>整体流程</h3><ul><li>在第三方平台应用上点击授权</li></ul><p><img src="https://upload-images.jianshu.io/upload_images/7429691-1f822a5a2c7d5609.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><ul><li>进入授权页面</li></ul><p><img src="https://upload-images.jianshu.io/upload_images/7429691-44af97e1cc29aa64.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><ul><li>弹出微信授权页面，下方会显示第三方应用的基本信息</li></ul><p><img src="https://upload-images.jianshu.io/upload_images/7429691-0762d88b8864caeb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><ul><li><strong>帐号管理员</strong>扫码，选择要授权的账号，进行授权（可自定义权限）</li></ul><p><img src="https://upload-images.jianshu.io/upload_images/7429691-5fe7791c5d8e8a1e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><ul><li>是否授权成功，回调页面显示</li></ul><h3 id="技术实现"><a href="#技术实现" class="headerlink" title="技术实现"></a>技术实现</h3><h5 id="第三方平台方获取预授权码（pre-auth-code）"><a href="#第三方平台方获取预授权码（pre-auth-code）" class="headerlink" title="第三方平台方获取预授权码（pre_auth_code）"></a>第三方平台方获取预授权码（pre_auth_code）</h5><p>接入在第三方平台应用上点击授权的时候会获取授权的预授权码（pre_auth_code），有效期为10分钟。</p><a id="more"></a><ul><li>调用接口地址</li></ul><blockquote><p>POST <a href="https://api.weixin.qq.com/cgi-bin/component/api_create_preauthcode?component_access_token=COMPONENT_ACCESS_TOKEN" target="_blank" rel="noopener">https://api.weixin.qq.com/cgi-bin/component/api_create_preauthcode?component_access_token=COMPONENT_ACCESS_TOKEN</a></p></blockquote><p>在调用此接口前，需要先获取第三方平台的令牌（也叫接口调用凭证component_access_token）</p><ul><li>参数</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;component_appid&quot;: &quot;appid_value&quot; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="后端返回参数，前端拼装请求微信url"><a href="#后端返回参数，前端拼装请求微信url" class="headerlink" title="后端返回参数，前端拼装请求微信url"></a>后端返回参数，前端拼装请求微信url</h4><p>加入授权页面的时候，前端将后端返回的数据进行组织，点击组装后的url调整按钮，就可以弹出授权窗口。（<strong>微信做了限制，只能在第三方平台在设置的回调url地址才可以访问，其他本地地址无效</strong>）<br><img src="https://upload-images.jianshu.io/upload_images/7429691-f6cf588847e9aa89.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><ul><li>后端返回的参数</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&apos;component_appid&apos; =&gt; &apos;XXX&apos;,  //第三方平台app_id</span><br><span class="line">&apos;pre_auth_code&apos;   =&gt; &apos;pre_auth_code&apos;  //  预授权码</span><br><span class="line">&apos;redirect_uri&apos;    =&gt; &apos;https://mp.weixin.qq.com/cgi-bin/componentloginpage&apos;,  //拼装的URL地址</span><br><span class="line">&apos;auth_type&apos;       =&gt;  1,  //1 2 3  要授权的帐号类型</span><br><span class="line">&apos;biz_appid&apos;       =&gt;  &apos;xxx&apos;  //指定授权唯一的小程序或公众号</span><br></pre></td></tr></table></figure><ul><li>拼装示例</li></ul><blockquote><p><a href="https://mp.weixin.qq.com/cgi-bin/componentloginpage?component_appid=xxxx&amp;pre_auth_code=xxxxx&amp;redirect_uri=xxxx&amp;auth_type=xxx" target="_blank" rel="noopener">https://mp.weixin.qq.com/cgi-bin/componentloginpage?component_appid=xxxx&amp;pre_auth_code=xxxxx&amp;redirect_uri=xxxx&amp;auth_type=xxx</a></p></blockquote><h4 id="用户授权，同意授权"><a href="#用户授权，同意授权" class="headerlink" title="用户授权，同意授权"></a>用户授权，同意授权</h4><p>用户进入第三方平台授权页后，需要确认并同意将自己的公众号或小程序授权给第三方平台方，完成授权流程。此时在微信上，公众号已经授权给第三方平台了，在公众号平台上可以看到授权平台。然后第三方平台需要拿到公众号的基本信息、授权信息和执行权限，需要回调地址进行处理、保存授权信息（<strong>access_token和refresh_token</strong>）。</p><h4 id="回调地址处理授权信息"><a href="#回调地址处理授权信息" class="headerlink" title="回调地址处理授权信息"></a>回调地址处理授权信息</h4><p>这个回调地址是在第三方平台上设置的，拿到授权码（auth_code）后，使用授权码换取公众号或小程序的接口调用凭据和授权信息。</p><ul><li>调用接口为：</li></ul><blockquote><p>POST <a href="https://api.weixin.qq.com/cgi-bin/component/api_query_auth?component_access_token=COMPONENT_ACCESS_TOKEN" target="_blank" rel="noopener">https://api.weixin.qq.com/cgi-bin/component/api_query_auth?component_access_token=COMPONENT_ACCESS_TOKEN</a></p></blockquote><ul><li>参数</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;component_appid&quot;:&quot;appid_value&quot; ,  //第三方平台 appid</span><br><span class="line">  &quot;authorization_code&quot;: &quot;auth_code_value&quot;  //授权码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>返回是仅仅是授权信息（authorization_info）。authorizer_appid，authorizer_access_token，expires_in，authorizer_refresh_token以及权限id集这些数据。稍未获得公众号一些基本帐号信息（公众号名称、头像等等），这时候需要去获取授权方的帐号基本信息。</p><ul><li>调用接口为：</li></ul><blockquote><p>POST <a href="https://api.weixin.qq.com/cgi-bin/component/api_get_authorizer_info?component_access_token==COMPONENT_ACCESS_TOKEN" target="_blank" rel="noopener">https://api.weixin.qq.com/cgi-bin/component/api_get_authorizer_info?component_access_token==COMPONENT_ACCESS_TOKEN</a></p></blockquote><ul><li>参数</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;component_appid&quot;:&quot;appid_value&quot; ,  //第三方平台 appid</span><br><span class="line">  &quot;authorizer_appid&quot;: &quot;auth_code_value&quot;  //授权方 appid</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>拿到信息后你就可以保存到数据库里了，整个微信公众号授权的流程就结束了，后续根据各自业务对授权信息和帐号信息进行其他业务处理就ok。</p><h3 id="实例代码"><a href="#实例代码" class="headerlink" title="实例代码"></a>实例代码</h3><blockquote><p><strong>$this-&gt;request()-&gt;getParams()</strong> 是封装好的获取参数的方法，可自行替代<br><strong>getComAccessToken()</strong> 是封装好的获取第三方接口调用凭证的方法，可自行替代<br><strong>httpsCurl()</strong> 是封装好的请求微信的方法，可自行替代<br><strong>WX_APP_ID</strong> 是全局参数第三方平台的app_id</p></blockquote><p>PS:这里的代码仅仅只是把整个业务流程写在一起，方便阅读，实际场景中代码当然不会这样子写</p><p>获取预授权码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * Created by 沙蒿.</span><br><span class="line">     * @desc 获取预授权码pre_auth_code，有效期10分钟</span><br><span class="line">     */</span><br><span class="line">    public function getWxPreAuthCode()</span><br><span class="line">    &#123;</span><br><span class="line">        $authType = $this-&gt;request()-&gt;getParams(&apos;auth_type&apos;) ?? 1;</span><br><span class="line">        //1公众号授权，2小程序授权</span><br><span class="line">        if (empty($authType) || !in_array($authType, [1, 2])) &#123;</span><br><span class="line">            return $this-&gt;error(100201);</span><br><span class="line">        &#125;</span><br><span class="line">        //获取第三方平台接口调用凭证</span><br><span class="line">        $comAccToken = $this-&gt;getComAccessToken();</span><br><span class="line">        //请求微信服务器获取预授权码url地址</span><br><span class="line">        $url         = &apos;https://api.weixin.qq.com/cgi-bin/component/api_create_preauthcode?component_access_token=&apos; . $comAccToken;</span><br><span class="line">        // 获取授权请求二维码url地址</span><br><span class="line">        $reqUrl      = &apos;https://mp.weixin.qq.com/cgi-bin/componentloginpage&apos;;</span><br><span class="line">        $preAuthCode = CommonService::getInstance()-&gt;httpsCurl($url, &apos;post&apos;, &apos;json&apos;, [</span><br><span class="line">            &apos;component_appid&apos; =&gt; WX_APP_ID</span><br><span class="line">        ]);</span><br><span class="line">        //组装格式，返回</span><br><span class="line">        $result = [</span><br><span class="line">            &apos;component_appid&apos; =&gt; WX_APP_ID,</span><br><span class="line">            &apos;pre_auth_code&apos;   =&gt; $preAuthCode[&apos;pre_auth_code&apos;],</span><br><span class="line">            &apos;redirect_uri&apos;    =&gt; $reqUrl,</span><br><span class="line">            &apos;auth_type&apos;       =&gt; $authType,</span><br><span class="line">        ];</span><br><span class="line">        if (!empty($bizAppId)) &#123;</span><br><span class="line">            $result[&apos;biz_appid&apos;] = $bizAppId;</span><br><span class="line">        &#125;</span><br><span class="line">        return $result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>回调地址处理授权信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * Created by 沙蒿.</span><br><span class="line">     * @desc 微信授权</span><br><span class="line">     * 授权后回调URI，得到授权码（authorization_code）和过期时间10分钟,使用授权码换取公众号或小程序的接口调用凭据和授权信息</span><br><span class="line">     */</span><br><span class="line">    public function wxOAuth()</span><br><span class="line">    &#123;</span><br><span class="line">        //接收授权码auth_code</span><br><span class="line">        $code = $this-&gt;request()-&gt;getParams(&apos;auth_code&apos;);</span><br><span class="line">        //校验参数</span><br><span class="line">        if (empty($code)) &#123;</span><br><span class="line">            return $this-&gt;error(100202);</span><br><span class="line">        &#125;</span><br><span class="line">        //获取第三方平台的接口调用凭证</span><br><span class="line">        $comAccToken = $this-&gt;getComAccessToken();</span><br><span class="line">        //使用授权码换取公众号或小程序的接口调用凭据和授权信息</span><br><span class="line">        $queryAuthUrl = &apos;https://api.weixin.qq.com/cgi-bin/component/api_query_auth?component_access_token=&apos; . $comAccToken;</span><br><span class="line">        $authInfo     = CommonService::getInstance()-&gt;httpsCurl($queryAuthUrl, &apos;post&apos;, &apos;json&apos;, [</span><br><span class="line">            &apos;component_appid&apos;    =&gt; WX_APP_ID,</span><br><span class="line">            &apos;authorization_code&apos; =&gt; $code</span><br><span class="line">        ]);</span><br><span class="line">        //获取授权信息</span><br><span class="line">        $authInfo        = $authInfo[&apos;authorization_info&apos;];</span><br><span class="line">        $authorizerAppId = $authInfo[&apos;authorizer_appid&apos;]; //授权方appid</span><br><span class="line">        //获取授权方的帐号基本信息</span><br><span class="line">        $authorizerInfoUrl = &apos;https://api.weixin.qq.com/cgi-bin/component/api_get_authorizer_info?component_access_token=&apos; . $comAccToken;</span><br><span class="line">        $appInfo           = CommonService::getInstance()-&gt;httpsCurl($authorizerInfoUrl, &apos;post&apos;, &apos;json&apos;, [</span><br><span class="line">            &apos;component_appid&apos;  =&gt; WX_APP_ID,</span><br><span class="line">            &apos;authorizer_appid&apos; =&gt; $authorizerAppId</span><br><span class="line">        ]);</span><br><span class="line">        //保存授权信息和帐号信息</span><br><span class="line">        $this-&gt;saveWxAuth($authInfo, $appInfo);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-253978f27f3ebf96.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;&lt;h3 id=&quot;整体流程&quot;&gt;&lt;a href=&quot;#整体流程&quot; class=&quot;headerlink&quot; title=&quot;整体流程&quot;&gt;&lt;/a&gt;整体流程&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;在第三方平台应用上点击授权&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-1f822a5a2c7d5609.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;进入授权页面&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-44af97e1cc29aa64.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;弹出微信授权页面，下方会显示第三方应用的基本信息&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-0762d88b8864caeb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;帐号管理员&lt;/strong&gt;扫码，选择要授权的账号，进行授权（可自定义权限）&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-5fe7791c5d8e8a1e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;是否授权成功，回调页面显示&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;技术实现&quot;&gt;&lt;a href=&quot;#技术实现&quot; class=&quot;headerlink&quot; title=&quot;技术实现&quot;&gt;&lt;/a&gt;技术实现&lt;/h3&gt;&lt;h5 id=&quot;第三方平台方获取预授权码（pre-auth-code）&quot;&gt;&lt;a href=&quot;#第三方平台方获取预授权码（pre-auth-code）&quot; class=&quot;headerlink&quot; title=&quot;第三方平台方获取预授权码（pre_auth_code）&quot;&gt;&lt;/a&gt;第三方平台方获取预授权码（pre_auth_code）&lt;/h5&gt;&lt;p&gt;接入在第三方平台应用上点击授权的时候会获取授权的预授权码（pre_auth_code），有效期为10分钟。&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="微信第三方平台" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0/"/>
    
  </entry>
  
  <entry>
    <title>第三方平台代替小程序实现登录功能流程梳理和实现</title>
    <link href="http://yoursite.com/2019/11/06/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0%E4%BB%A3%E6%9B%BF%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD%E6%B5%81%E7%A8%8B%E6%A2%B3%E7%90%86%E5%92%8C%E5%AE%9E%E7%8E%B0/"/>
    <id>http://yoursite.com/2019/11/06/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0%E4%BB%A3%E6%9B%BF%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD%E6%B5%81%E7%A8%8B%E6%A2%B3%E7%90%86%E5%92%8C%E5%AE%9E%E7%8E%B0/</id>
    <published>2019-11-06T15:39:16.000Z</published>
    <updated>2019-11-18T06:17:58.992Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p><img src="https://upload-images.jianshu.io/upload_images/7429691-70d1c79d596ae7a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="第三方平台接入"></p><h3 id="整体流程"><a href="#整体流程" class="headerlink" title="整体流程"></a>整体流程</h3><p><a href="[https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html)">微信官方文档</a><br><img src="https://upload-images.jianshu.io/upload_images/7429691-06c4cc6a442dc1f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="微信小程序登录流程时序图"></p><h3 id="详细说明"><a href="#详细说明" class="headerlink" title="详细说明"></a>详细说明</h3><p>现在用户初次进入小程序中先需要用户进行授权操作，其实就是“登录”，然后拿到“用户信息”的操作。上面wx.login()只是拿到了登录code，并没有获取用户信息。一般小程序登录接口会给code和用户加密敏感信息相关字段。</p><ul><li>小程序调用的接口：<a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html" target="_blank" rel="noopener">登录</a> <a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserInfo.html" target="_blank" rel="noopener">用户授权</a></li><li>后台登录参数</li></ul><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>appId</td><td>string</td><td>小程序的app_id</td></tr><tr><td>code</td><td>string</td><td>登录code</td></tr><tr><td>rawData</td><td>string</td><td>不包括敏感信息的原始数据字符串，用于计算签名</td></tr><tr><td>signature</td><td>string</td><td>使用 sha1( rawData + sessionkey ) 得到字符串，用于校验用户信息，详见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html" target="_blank" rel="noopener">用户数据的签名验证和加解密</a></td></tr><tr><td>encryptedData</td><td>string</td><td>包括敏感数据在内的完整用户信息的加密数据，详见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html#%E5%8A%A0%E5%AF%86%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%AF%86%E7%AE%97%E6%B3%95" target="_blank" rel="noopener">用户数据的签名验证和加解密</a></td></tr><tr><td>iv</td><td>string</td><td>加密算法的初始向量，详见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html#%E5%8A%A0%E5%AF%86%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%AF%86%E7%AE%97%E6%B3%95" target="_blank" rel="noopener">用户数据的签名验证和加解密</a></td></tr></tbody></table><a id="more"></a><hr><p>接收到参数后，从时序图可以知道。要拿code调用微信接口获取session_key和openid这些加密信息，然后对其进行解密，解密就用官方的<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html" target="_blank" rel="noopener">解密sdk</a>就好，最好保存小程序粉丝信息，返回自定义登录token给前端，下次前端请求接口的时候需要在请求头把自定义的tokne给过来验证。</p><ul><li><a href="https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/Mini_Programs/WeChat_login.html" target="_blank" rel="noopener">小程序登录</a>调用地址</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET https://api.weixin.qq.com/sns/component/jscode2session?appid=APPID&amp;js_code=JSCODE&amp;grant_type=authorization_code&amp;component_appid=COMPONENT_APPID&amp;component_access_token=COMPONENT_ACCESS_TOKEN</span><br></pre></td></tr></table></figure><ul><li>参数</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&apos;appid&apos;                  =&gt; appid,  //小程序appid</span><br><span class="line">&apos;js_code&apos;                =&gt; code,   //登录code</span><br><span class="line">&apos;grant_type&apos;             =&gt; &apos;authorization_code&apos;,  //固定值</span><br><span class="line">&apos;component_appid&apos;        =&gt; WX_APP_ID,   //第三方平台 appid</span><br><span class="line">&apos;component_access_token&apos; =&gt; $comAccToke  //第三方平台接口凭证</span><br></pre></td></tr></table></figure><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><blockquote><p><strong>$this-&gt;request()-&gt;getParams()</strong> 是封装好的获取参数的方法，可自行替代<br><strong>getComAccessToken()</strong> 是封装好的获取第三方接口调用凭证的方法，可自行替代<br><strong>httpsCurl()</strong> 是封装好的请求微信的方法，可自行替代<br><strong>WX_APP_ID</strong> 是全局参数第三方平台的app_id</p></blockquote><p>PS:这里的代码仅仅只是把整个业务流程写在一起，方便阅读，实际场景中代码当然不会这样子写</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * Created by 沙蒿.</span><br><span class="line">     * @desc 小程序用户授权登录</span><br><span class="line">     */</span><br><span class="line">    public function wxLogin()</span><br><span class="line">    &#123;</span><br><span class="line">        //接收参数</span><br><span class="line">        $request                 = $this-&gt;request()-&gt;getParams();</span><br><span class="line">        $filter                  = [];</span><br><span class="line">        $filter[&apos;appid&apos;]         = $request[&apos;appid&apos;];</span><br><span class="line">        $filter[&apos;code&apos;]          = $request[&apos;code&apos;];</span><br><span class="line">        $filter[&apos;userInfo&apos;]      = $request[&apos;userInfo&apos;];</span><br><span class="line">        $filter[&apos;rawData&apos;]       = $request[&apos;rawData&apos;];</span><br><span class="line">        $filter[&apos;signature&apos;]     = $request[&apos;signature&apos;];</span><br><span class="line">        $filter[&apos;encryptedData&apos;] = $request[&apos;encryptedData&apos;];</span><br><span class="line">        $filter[&apos;iv&apos;]            = $request[&apos;iv&apos;];</span><br><span class="line">        //校验参数</span><br><span class="line">        $check = $this-&gt;checkAppLogin($filter);</span><br><span class="line">        //获取第三方接口调用凭证（令牌）</span><br><span class="line">        $comAccToken = $this-&gt;getComAccessToken();</span><br><span class="line">        //调用微信服务器接口，获，openId + sessionKey + （unionId）</span><br><span class="line">        $url       = &apos;https://api.weixin.qq.com/sns/component/jscode2session&apos;;</span><br><span class="line">        $loginInfo = CommonService::getInstance()-&gt;httpsCurl($url, &apos;get&apos;, &apos;json&apos;, [</span><br><span class="line">            &apos;appid&apos;                  =&gt; $filter[&apos;appid&apos;],</span><br><span class="line">            &apos;js_code&apos;                =&gt; $filter[&apos;code&apos;],</span><br><span class="line">            &apos;grant_type&apos;             =&gt; &apos;authorization_code&apos;,</span><br><span class="line">            &apos;component_appid&apos;        =&gt; WX_APP_ID,</span><br><span class="line">            &apos;component_access_token&apos; =&gt; $comAccToken</span><br><span class="line">        ]);</span><br><span class="line">        //sha1散列算法加密，验证signature</span><br><span class="line">        $signature = sha1($filter[&apos;rawData&apos;] . $loginInfo[&apos;session_key&apos;]);</span><br><span class="line">        //加密数据解密算法，解密获取用户敏感信息</span><br><span class="line">        include_once ROOT_PATH . &apos;wxBizDataCrypt.php&apos;;</span><br><span class="line">        $decrypt = new \WXBizDataCrypt($filter[&apos;appid&apos;], $loginInfo[&apos;session_key&apos;]);</span><br><span class="line">        $errCode = $decrypt-&gt;decryptData($filter[&apos;encryptedData&apos;], $filter[&apos;iv&apos;], $userInfo);</span><br><span class="line">        //保存用户粉丝到用户服务，并调用帐号服务获取token</span><br><span class="line">        return $this-&gt;saveMiniAppFans($userInfo, $filter[&apos;appid&apos;], $loginInfo[&apos;session_key&apos;]);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-70d1c79d596ae7a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;第三方平台接入&quot;&gt;&lt;/p&gt;&lt;h3 id=&quot;整体流程&quot;&gt;&lt;a href=&quot;#整体流程&quot; class=&quot;headerlink&quot; title=&quot;整体流程&quot;&gt;&lt;/a&gt;整体流程&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;[https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html)&quot;&gt;微信官方文档&lt;/a&gt;&lt;br&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-06c4cc6a442dc1f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;微信小程序登录流程时序图&quot;&gt;&lt;/p&gt;&lt;h3 id=&quot;详细说明&quot;&gt;&lt;a href=&quot;#详细说明&quot; class=&quot;headerlink&quot; title=&quot;详细说明&quot;&gt;&lt;/a&gt;详细说明&lt;/h3&gt;&lt;p&gt;现在用户初次进入小程序中先需要用户进行授权操作，其实就是“登录”，然后拿到“用户信息”的操作。上面wx.login()只是拿到了登录code，并没有获取用户信息。一般小程序登录接口会给code和用户加密敏感信息相关字段。&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;小程序调用的接口：&lt;a href=&quot;https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;登录&lt;/a&gt; &lt;a href=&quot;https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserInfo.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;用户授权&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;后台登录参数&lt;/li&gt;
&lt;/ul&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;参数&lt;/th&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;appId&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;小程序的app_id&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;code&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;登录code&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;rawData&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;不包括敏感信息的原始数据字符串，用于计算签名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;signature&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;使用 sha1( rawData + sessionkey ) 得到字符串，用于校验用户信息，详见 &lt;a href=&quot;https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;用户数据的签名验证和加解密&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;encryptedData&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;包括敏感数据在内的完整用户信息的加密数据，详见 &lt;a href=&quot;https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html#%E5%8A%A0%E5%AF%86%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%AF%86%E7%AE%97%E6%B3%95&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;用户数据的签名验证和加解密&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;iv&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;加密算法的初始向量，详见 &lt;a href=&quot;https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html#%E5%8A%A0%E5%AF%86%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%AF%86%E7%AE%97%E6%B3%95&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;用户数据的签名验证和加解密&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
    
    </summary>
    
    
    
      <category term="微信第三方平台" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0/"/>
    
  </entry>
  
  <entry>
    <title>这可能是一篇负能量文</title>
    <link href="http://yoursite.com/2019/11/05/%E8%BF%99%E5%8F%AF%E8%83%BD%E6%98%AF%E4%B8%80%E7%AF%87%E8%B4%9F%E8%83%BD%E9%87%8F%E6%96%87/"/>
    <id>http://yoursite.com/2019/11/05/%E8%BF%99%E5%8F%AF%E8%83%BD%E6%98%AF%E4%B8%80%E7%AF%87%E8%B4%9F%E8%83%BD%E9%87%8F%E6%96%87/</id>
    <published>2019-11-05T07:24:04.000Z</published>
    <updated>2019-11-18T07:27:17.696Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p>11月到了，距离2020年只剩下两个月。看着18年许下的愿望清单，感慨万千。<strong>（轻音乐 - Drum.mp3）</strong><br><img src="https://upload-images.jianshu.io/upload_images/7429691-a30ccf757782a778.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>自毕业也来，我努力过，吐槽过，多次放弃过，但最后还是坚持下来了。工作上的不易我很少跟别人提起，什么样的苦只有自己知道。或许，这是90后的倔强吧，苦自己承担，累休息就好。现在的工作是稳定了，但变得安逸了，熟悉的业务，熟悉的流程，熟悉的人，工作很好开展，唯独没有找到自己喜欢做的事情。所以第一项我算是完成了一半，第二项从业绩考核上看，3.5良好算是达成成就吧。<br>  对于学习，刚开始我一刻都不敢松懈，不敢怠慢，时间是最好的灭火器，慢慢的湮灭我心中的那团火，坚持了半年后，我开始疲了，我开始找不到学习的方向，找不到学习的动力，开始变得“混”了，对于工作的热情、积极性渐渐淡去，对于生活的趣味性也渐渐没了期待没有念想，有的，就是那到手的几千块钱工资。第三项勉强完成，学习了swoole、swoole相关的框架、开发实践了千万级数据的处理、微服务架构体系相关的理论和组件认识；第五项看了2本书《php内核剖析》《php7底层设计与源代码实现》，完成度不到一半，甚是惭愧。<br>两次省外旅游是我一直期待的，是最没有时间去完成的。或许，还差一个旅途中的伴侣吧。最想去的地方就是内蒙古大草原和海南三亚了，一个向南一个往北，通往的都是自由广阔的天空。如果可以的话，忙完双十一后（公司是做电商的），我希望可以调休出去走走。<br>大学贷款学费这个事情，水到渠成，不愿多说，多讲。<br>最后，希望自己能坚持写文，坚持学习，坚持做一个上进的男孩。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;p&gt;11月到了，距离2020年只剩下两个月。看着18年许下的愿望清单，感慨万千。&lt;strong&gt;（轻音乐 - Drum.mp3）&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;https://
      
    
    </summary>
    
    
    
      <category term="情绪" scheme="http://yoursite.com/tags/%E6%83%85%E7%BB%AA/"/>
    
  </entry>
  
  <entry>
    <title>生活还得继续，应届毕业生再有热情也顶不住啊！</title>
    <link href="http://yoursite.com/2019/08/13/%E9%A1%B6%E4%B8%8D%E4%BD%8F/"/>
    <id>http://yoursite.com/2019/08/13/%E9%A1%B6%E4%B8%8D%E4%BD%8F/</id>
    <published>2019-08-13T07:28:32.000Z</published>
    <updated>2019-11-18T07:31:07.204Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p>曾经有一个医生讲过这样一句话：“当你明显感觉到你身体的某个器官时，你会发现它病了……”，是的，从毕业以后，我一直努力的投入到工作中，为了项目能够顺利进行，我与团队的小伙伴一起没日没夜的加班，每晚10点走已是常态，有时候呆到凌晨几点钟的都有，一天工作均12个小时，然当初进去的时候人事说的是早九晚六，周末双休，进去之后，却是另一种说辞。</p><a id="more"></a><p>我的领导常说：“纯粹的开发是不存在的，产品开发要以产品交付为核心，不以产品交付为核心的开发都是耍流氓”“现在项目进度很赶，加班将会是我们的常态，上班记得带好换洗衣服，实在不行就在隔壁酒店住得了”“我们现在开发测试同学的工作要日事日清，每天的工作不能留到明天，做不完就加班”。</p><p>作为一名普普通通的应届生，我们对于工作的要求其实并不高，因为我们刚从学校出来，大部分过的都属于那种一人吃饱全家享福的日子，没有房贷没有车贷，没有女朋友的则更省事，我们期望更多的是在于职业技能的提高和人际关系的改善，热情积极是我们的专有标签，年轻代表我们有着无限可能，但有时候往往你的领导就会利用这一点，我的领导曾跟我说过：“很高兴你从实习生转正，我们将培养你成为职业化的开发人员，你已被列入严格培养制度内，你需要怎样….你应该怎样…..我们看好你的成长”。起初我还蛮感激的，领导看好我，我应该努力努力做出成绩来，到后来我发现他的眼里只有项目进度，不管用什么办法，只想看到项目达标，他说，做不完就给我加班，加班解决不了的就周末也来，直到项目完成。加班不可怕，可怕的是没日没夜无时无刻，时间长达几个月，我的身体现在就很疲惫很累，曾经凌晨两点我在公司的时候真怕自己在那一刻猝死，感觉自己就是一架机器在不停的运转，心脏是核心，承载不住就挂了。</p><p>生命诚可贵，加班需谨慎，量力而行，不要把身体拼坏了。</p>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;p&gt;曾经有一个医生讲过这样一句话：“当你明显感觉到你身体的某个器官时，你会发现它病了……”，是的，从毕业以后，我一直努力的投入到工作中，为了项目能够顺利进行，我与团队的小伙伴一起没日没夜的加班，每晚10点走已是常态，有时候呆到凌晨几点钟的都有，一天工作均12个小时，然当初进去的时候人事说的是早九晚六，周末双休，进去之后，却是另一种说辞。&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="情绪" scheme="http://yoursite.com/tags/%E6%83%85%E7%BB%AA/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode力扣算法题目——三数之和</title>
    <link href="http://yoursite.com/2019/08/10/Leetcode%E5%8A%9B%E6%89%A3%E7%AE%97%E6%B3%95%E9%A2%98%E7%9B%AE%E2%80%94%E2%80%94%E4%B8%89%E6%95%B0%E4%B9%8B%E5%92%8C/"/>
    <id>http://yoursite.com/2019/08/10/Leetcode%E5%8A%9B%E6%89%A3%E7%AE%97%E6%B3%95%E9%A2%98%E7%9B%AE%E2%80%94%E2%80%94%E4%B8%89%E6%95%B0%E4%B9%8B%E5%92%8C/</id>
    <published>2019-08-10T07:31:43.000Z</published>
    <updated>2019-11-18T11:07:37.504Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p>给定一个包含 n 个整数的数组 nums，判断 nums 中是否存在三个元素 a，b，c ，使得 a + b + c = 0 ？找出所有满足条件且不重复的三元组。</p><p><strong>注意：答案中不可以包含重复的三元组。</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">例如, 给定数组 nums = [-1, 0, 1, 2, -1, -4]，</span><br><span class="line"></span><br><span class="line">满足要求的三元组集合为：</span><br><span class="line">[</span><br><span class="line">  [-1, 0, 1],</span><br><span class="line">  [-1, -1, 2]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="PHP代码实现"><a href="#PHP代码实现" class="headerlink" title="PHP代码实现"></a>PHP代码实现</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer[] $nums</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Integer[][]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">threeSum</span><span class="params">($nums)</span> </span>&#123;</span><br><span class="line">        sort($nums);</span><br><span class="line">        $len = count($nums);</span><br><span class="line">        $res = [];</span><br><span class="line">        <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; $len <span class="number">-2</span>; $i ++) &#123;</span><br><span class="line">            $l = $i + <span class="number">1</span>;</span><br><span class="line">            $r = $len - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> ($l &lt; $r) &#123;</span><br><span class="line">                $sum = $nums[$i] + $nums[$l] + $nums[$r];</span><br><span class="line">                <span class="keyword">if</span> ($sum === <span class="number">0</span> &amp;&amp; $r &gt; $l) &#123;</span><br><span class="line">                    $tmp   = [$nums[$i], $nums[$l], $nums[$r]];</span><br><span class="line">                    $res[] = $tmp;</span><br><span class="line">                    <span class="keyword">while</span> ($l &lt; $r &amp;&amp; $nums[$r] === $nums[$r - <span class="number">1</span>]) &#123;</span><br><span class="line">                        $r--;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">while</span> ($l &lt; $r &amp;&amp; $nums[$l] === $nums[$l + <span class="number">1</span>]) &#123;</span><br><span class="line">                        $l++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    $r--;</span><br><span class="line">                    $l++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> ($sum &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        $r--;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        $l++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array_unique($res, SORT_REGULAR);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="https://upload-images.jianshu.io/upload_images/7429691-8e2f9e6d9c423f10.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;p&gt;给定一个包含 n 个整数的数组 nums，判断 nums 中是否存在三个元素 a，b，c ，使得 a + b + c = 0 ？找出所有满足条件且不重复的三元组。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;注意：答案中不可以包含重复的三元组。&lt;/strong&gt;&lt;/p&gt;&lt;figure class=&quot;highlight markdown&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;例如, 给定数组 nums = [-1, 0, 1, 2, -1, -4]，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;满足要求的三元组集合为：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [-1, 0, 1],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [-1, -1, 2]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode力扣算法题目——组合</title>
    <link href="http://yoursite.com/2019/08/10/Leetcode%E5%8A%9B%E6%89%A3%E7%AE%97%E6%B3%95%E9%A2%98%E7%9B%AE%E2%80%94%E2%80%94%E7%BB%84%E5%90%88/"/>
    <id>http://yoursite.com/2019/08/10/Leetcode%E5%8A%9B%E6%89%A3%E7%AE%97%E6%B3%95%E9%A2%98%E7%9B%AE%E2%80%94%E2%80%94%E7%BB%84%E5%90%88/</id>
    <published>2019-08-10T07:29:42.000Z</published>
    <updated>2019-11-18T11:07:53.736Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p>给定两个整数 n 和 k，返回 1 … n 中所有可能的 k 个数的组合。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">示例:</span><br><span class="line">输入: n = 4, k = 2</span><br><span class="line">输出:</span><br><span class="line">[</span><br><span class="line">  [2,4],</span><br><span class="line">  [3,4],</span><br><span class="line">  [2,3],</span><br><span class="line">  [1,2],</span><br><span class="line">  [1,3],</span><br><span class="line">  [1,4],</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="PHP代码实现"><a href="#PHP代码实现" class="headerlink" title="PHP代码实现"></a>PHP代码实现</h3><p>array_slice 从数组中取出一段</p><a id="more"></a><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer $n</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer $k</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Integer[][]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">combine</span><span class="params">($n, $k)</span> </span>&#123;</span><br><span class="line">        $arr = range(<span class="number">1</span>,$n);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>::combination($arr, $k);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">combination</span><span class="params">($st_array, $m)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $re_array = <span class="keyword">array</span>();</span><br><span class="line">        $n = count($st_array);</span><br><span class="line">        <span class="keyword">if</span> ($m &lt;= <span class="number">0</span> || $m &gt; $n) &#123;</span><br><span class="line">            <span class="keyword">return</span> $re_array;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $n; $i++) &#123;</span><br><span class="line">            $t = <span class="keyword">array</span>($st_array[$i]);</span><br><span class="line">            <span class="keyword">if</span> ($m == <span class="number">1</span>) &#123;</span><br><span class="line">                $re_array[] = $t;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                $item_array = array_slice($st_array, $i + <span class="number">1</span>);</span><br><span class="line">                $c          = <span class="keyword">self</span>::combination($item_array, $m - <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">foreach</span> ($c <span class="keyword">as</span> $v) &#123;</span><br><span class="line">                    $re_array[] = array_merge($t, $v);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> $re_array;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="https://upload-images.jianshu.io/upload_images/7429691-9aa9ccce8053edd8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;h3 id=&quot;题目&quot;&gt;&lt;a href=&quot;#题目&quot; class=&quot;headerlink&quot; title=&quot;题目&quot;&gt;&lt;/a&gt;题目&lt;/h3&gt;&lt;p&gt;给定两个整数 n 和 k，返回 1 … n 中所有可能的 k 个数的组合。&lt;/p&gt;&lt;figure class=&quot;highlight markdown&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;示例:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;输入: n = 4, k = 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;输出:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [2,4],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [3,4],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [2,3],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [1,2],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [1,3],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [1,4],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h3 id=&quot;PHP代码实现&quot;&gt;&lt;a href=&quot;#PHP代码实现&quot; class=&quot;headerlink&quot; title=&quot;PHP代码实现&quot;&gt;&lt;/a&gt;PHP代码实现&lt;/h3&gt;&lt;p&gt;array_slice 从数组中取出一段&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode力扣算法题目——两数之和</title>
    <link href="http://yoursite.com/2019/08/09/Leetcode%E5%8A%9B%E6%89%A3%E7%AE%97%E6%B3%95%E9%A2%98%E7%9B%AE%E2%80%94%E2%80%94%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/"/>
    <id>http://yoursite.com/2019/08/09/Leetcode%E5%8A%9B%E6%89%A3%E7%AE%97%E6%B3%95%E9%A2%98%E7%9B%AE%E2%80%94%E2%80%94%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/</id>
    <published>2019-08-09T07:34:00.000Z</published>
    <updated>2019-11-18T11:07:42.968Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p>给定一个整数数组 nums 和一个目标值 target，请你在该数组中找出和为目标值的那 两个 整数，并返回他们的数组下标。</p><p>你可以假设每种输入只会对应一个答案。但是，你不能重复利用这个数组中同样的元素。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">示例:</span><br><span class="line">给定 nums = [2, 7, 11, 15], target = 9</span><br><span class="line"></span><br><span class="line">因为 nums[0] + nums[1] = 2 + 7 = 9</span><br><span class="line">所以返回 [0, 1]</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="php第一种解法"><a href="#php第一种解法" class="headerlink" title="php第一种解法"></a>php第一种解法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer[] $nums</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer $target</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Integer[]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">twoSum</span><span class="params">($nums, $target)</span> </span>&#123;</span><br><span class="line">        $len = count($nums);</span><br><span class="line">        $res = [];</span><br><span class="line">        <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; $len <span class="number">-1</span> ; $i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>($j = $i + <span class="number">1</span>; $j &lt; $len ; $j ++) &#123;</span><br><span class="line">                <span class="keyword">if</span>($nums[$i] + $nums[$j] == $target) &#123;</span><br><span class="line">                    $res = [$i, $j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array_unique($res, SORT_REGULAR);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://upload-images.jianshu.io/upload_images/7429691-f5bb60e64c491991.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;p&gt;给定一个整数数组 nums 和一个目标值 target，请你在该数组中找出和为目标值的那 两个 整数，并返回他们的数组下标。&lt;/p&gt;&lt;p&gt;你可以假设每种输入只会对应一个答案。但是，你不能重复利用这个数组中同样的元素。&lt;/p&gt;&lt;figure class=&quot;highlight markdown&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;示例:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;给定 nums = [2, 7, 11, 15], target = 9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;因为 nums[0] + nums[1] = 2 + 7 = 9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;所以返回 [0, 1]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode力扣算法题目——四数之和</title>
    <link href="http://yoursite.com/2019/08/08/Leetcode%E5%8A%9B%E6%89%A3%E7%AE%97%E6%B3%95%E9%A2%98%E7%9B%AE%E2%80%94%E2%80%94%E5%9B%9B%E6%95%B0%E4%B9%8B%E5%92%8C/"/>
    <id>http://yoursite.com/2019/08/08/Leetcode%E5%8A%9B%E6%89%A3%E7%AE%97%E6%B3%95%E9%A2%98%E7%9B%AE%E2%80%94%E2%80%94%E5%9B%9B%E6%95%B0%E4%B9%8B%E5%92%8C/</id>
    <published>2019-08-08T07:38:11.000Z</published>
    <updated>2019-11-18T11:07:48.680Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><blockquote><p>给定一个包含 n 个整数的数组 nums 和一个目标值 target，判断 nums 中是否存在四个元素 a，b，c 和 d ，使得 a + b + c + d 的值与 target 相等？找出所有满足条件且不重复的四元组。</p></blockquote><p><strong>注意：答案中不可以包含重复的四元组。</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">示例：</span><br><span class="line"></span><br><span class="line">给定数组 nums = [1, 0, -1, 0, -2, 2]，和 target = 0。</span><br><span class="line"></span><br><span class="line">满足要求的四元组集合为：</span><br><span class="line">[</span><br><span class="line">  [-1,  0, 0, 1],</span><br><span class="line">  [-2, -1, 1, 2],</span><br><span class="line">  [-2,  0, 0, 2]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><p>我这边使用的是php语言排列组合的递归方法，得出所有四个数的集合，在对每一个数组进行求和与目标数相比。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer[] $nums</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer $target</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Integer[][]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fourSum</span><span class="params">($nums, $target)</span> </span>&#123;</span><br><span class="line">        $result = [];</span><br><span class="line">        $com_array = <span class="keyword">self</span>::combination($nums, <span class="number">4</span>);</span><br><span class="line">        <span class="keyword">foreach</span>($com_array <span class="keyword">as</span> $arr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (array_sum($arr) === $target &amp;&amp; is_array($arr)) &#123;</span><br><span class="line">                sort($arr);</span><br><span class="line">                $result[] = $arr;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array_unique($result, SORT_REGULAR);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">combination</span><span class="params">($st_array, $m)</span> </span>&#123;</span><br><span class="line">        $re_array = <span class="keyword">array</span>();</span><br><span class="line"></span><br><span class="line">        $n = count($st_array);</span><br><span class="line">        <span class="keyword">if</span> ($m &lt;= <span class="number">0</span> || $m &gt; $n) &#123;</span><br><span class="line">            <span class="keyword">return</span> $re_array;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;$n; $i++) &#123;</span><br><span class="line">            $t = <span class="keyword">array</span>($st_array[$i]);</span><br><span class="line">            <span class="keyword">if</span> ($m == <span class="number">1</span>) &#123;</span><br><span class="line">                $re_array[] = $t;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                $item_array = array_slice($st_array, $i+<span class="number">1</span>);</span><br><span class="line">                $c = <span class="keyword">self</span>::combination($item_array, $m<span class="number">-1</span>);</span><br><span class="line">                <span class="keyword">foreach</span> ($c <span class="keyword">as</span> $v) &#123;</span><br><span class="line">                    $re_array[] = array_merge($t, $v);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> $re_array;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="出现问题-超出内存限制"><a href="#出现问题-超出内存限制" class="headerlink" title="出现问题-超出内存限制"></a>出现问题-超出内存限制</h3><p><img src="https://upload-images.jianshu.io/upload_images/7429691-016ed774443d8860.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>设置了 ini_set(‘memory_limit’,’256M’); 512M，1024M均不行，力扣官网测试用例在不断的增加数组的长度，导致内存原因执行失败。</p><p><strong>Line 36: PHP Fatal error:  Allowed memory size of 536870912 bytes exhausted (tried to allocate 67108872 bytes) in solution.php</strong></p><hr><p>百度到了一大神写的方法，感觉很强，分享一下：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer[] $nums</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer $target</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Integer[][]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fourSum</span><span class="params">($nums, $target)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        sort($nums);</span><br><span class="line">        $len = count($nums);</span><br><span class="line">        $res = [];</span><br><span class="line">        <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $len - <span class="number">3</span>; $i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> ($j = $i + <span class="number">1</span>; $j &lt; $len - <span class="number">2</span>; $j++) &#123;</span><br><span class="line">                $l = $j + <span class="number">1</span>;</span><br><span class="line">                $r = $len - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">while</span> ($l &lt; $r) &#123;</span><br><span class="line">                    $sum = $nums[$i] + $nums[$j] + $nums[$l] + $nums[$r];</span><br><span class="line">                    <span class="keyword">if</span> ($sum === $target &amp;&amp; $r &gt; $l) &#123;</span><br><span class="line">                        $tmp   = [$nums[$i], $nums[$j], $nums[$l], $nums[$r]];</span><br><span class="line">                        $res[] = $tmp;</span><br><span class="line">                        <span class="keyword">while</span> ($l &lt; $r &amp;&amp; $nums[$r] === $nums[$r - <span class="number">1</span>]) &#123;</span><br><span class="line">                            $r--;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">while</span> ($l &lt; $r &amp;&amp; $nums[$l] === $nums[$l + <span class="number">1</span>]) &#123;</span><br><span class="line">                            $l++;</span><br><span class="line">                        &#125;</span><br><span class="line">                        $r--;</span><br><span class="line">                        $l++;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> ($sum &gt; $target) &#123;</span><br><span class="line">                            $r--;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            $l++;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array_unique($res, SORT_REGULAR);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码执行结果"><a href="#代码执行结果" class="headerlink" title="代码执行结果"></a>代码执行结果</h3><p><img src="https://upload-images.jianshu.io/upload_images/7429691-ce3595d1a7d9e4b0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><h3 id="小小总结"><a href="#小小总结" class="headerlink" title="小小总结"></a>小小总结</h3><p>菜鸟的我一看到这道题一下子想到了用排列组合的方法，但缺乏考虑的是内存的限制<br><img src="https://upload-images.jianshu.io/upload_images/7429691-e3ac86a30f641189.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>根据组合的公式，假设数组有一百个数，求四数之和，那就是要计算100 * 99 * 98 * 97 / 12 = 7842450次得到满足条件的所有数组，后续还有操作未执行….细思极恐啊。难怪内存超出限制执行异常。</p><p>优化后的方法看起来简单又高效，最后占用内存15M不到，简直是大大提升。</p>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;blockquote&gt;
&lt;p&gt;给定一个包含 n 个整数的数组 nums 和一个目标值 target，判断 nums 中是否存在四个元素 a，b，c 和 d ，使得 a + b + c + d 的值与 target 相等？找出所有满足条件且不重复的四元组。&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;&lt;strong&gt;注意：答案中不可以包含重复的四元组。&lt;/strong&gt;&lt;/p&gt;&lt;figure class=&quot;highlight markdown&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;示例：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;给定数组 nums = [1, 0, -1, 0, -2, 2]，和 target = 0。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;满足要求的四元组集合为：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [-1,  0, 0, 1],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [-2, -1, 1, 2],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [-2,  0, 0, 2]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>大学毕业后的现状</title>
    <link href="http://yoursite.com/2019/08/01/%E5%A4%A7%E5%AD%A6%E6%AF%95%E4%B8%9A%E5%90%8E%E7%9A%84%E7%8E%B0%E7%8A%B6/"/>
    <id>http://yoursite.com/2019/08/01/%E5%A4%A7%E5%AD%A6%E6%AF%95%E4%B8%9A%E5%90%8E%E7%9A%84%E7%8E%B0%E7%8A%B6/</id>
    <published>2019-08-01T07:37:21.000Z</published>
    <updated>2019-11-18T14:11:40.511Z</updated>
    
    <content type="html"><![CDATA[<p>6月是一个转折点，不仅仅是学生到社畜的一种变化，更是心态的成长。<br>6月是一个离别，大学同学吃完最后一顿散伙饭后各奔东西，却不曾想那就是最后一面了。<br>6月份大学毕业后很多事情都在毕业那一刻就改变了，不管你是准备与否，你都得作为一个社会人去接受它，去适应它。就像我们在校园里总有写不完的作业抄不完的笔记。<br>不知道你们有没有被催婚过，不知道你们有没有感慨生活圈子很狭窄，不知道你们有没有想念校园甚至梦到考场上那到解不出来的题目。<br>生活开始远离校园，学生卡不能用了，学生票享受不到了，教育补贴更别想了，唯一能感受到校园生活的那就是朋友圈中师弟师妹在校园的甜蜜秀恩爱。有点惨，二十几个七夕过去了，咱还是那个单身汉子。<br>然而，你还得加班，加班到凌晨5点隔天还得顶着大太阳赶地铁上班。每一次努力每一次付出，除了那少得可怜的薪水外，领导还会额外奖励你几个大拇指——“坚持就是胜利”“找到归属感，努力创建自己的价值”“年轻人好棒的”，其实我倒觉得多给点加班费或许我会更高兴一些。<br>因为工作，很搞笑的事情就是我现在和家人住在一块，然而我一星期才见到我妹妹一次，白天我很早上班晚上很晚下班，平时压根碰不到面。<br>写到这里不知道自己写了啥玩意，明儿还得上班，先这样吧，做一个小小记录，生活还得继续，负能量快快走开。日志</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;6月是一个转折点，不仅仅是学生到社畜的一种变化，更是心态的成长。&lt;br&gt;6月是一个离别，大学同学吃完最后一顿散伙饭后各奔东西，却不曾想那就是最后一面了。&lt;br&gt;6月份大学毕业后很多事情都在毕业那一刻就改变了，不管你是准备与否，你都得作为一个社会人去接受它，去适应它。就像我们
      
    
    </summary>
    
    
    
      <category term="大学" scheme="http://yoursite.com/tags/%E5%A4%A7%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>三层架构，如何提高协作开发和联调效率</title>
    <link href="http://yoursite.com/2019/07/07/%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%EF%BC%8C%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E5%8D%8F%E4%BD%9C%E5%BC%80%E5%8F%91%E5%92%8C%E8%81%94%E8%B0%83%E6%95%88%E7%8E%87/"/>
    <id>http://yoursite.com/2019/07/07/%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%EF%BC%8C%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E5%8D%8F%E4%BD%9C%E5%BC%80%E5%8F%91%E5%92%8C%E8%81%94%E8%B0%83%E6%95%88%E7%8E%87/</id>
    <published>2019-07-07T07:39:38.000Z</published>
    <updated>2019-11-18T11:00:31.385Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p>  今天我研究的课题《三层架构，如何提高协作开发和联调效率》，作为一名刚走出校园应届生，这一课题对我来说是即陌生又熟悉，对于三层架构的诞生、理论和优缺点，往深了讲，是我在校园和往期实习工作中尚未接触到的深水区，然而在当前重构项目中我却又是其中的一名实践者——业务层开发人员。半年来的实践与开发，在架构师的带领下，摸着石头过河，在今天这个课题下，写下我对三层架构的思考与提高联调的解决方案。本人才疏学浅，深知在后端开发领域知识面不够深不够广，对于课题写下自己的一点想法。</p><a id="more"></a><h3 id="一、什么是三层架构？"><a href="#一、什么是三层架构？" class="headerlink" title="一、什么是三层架构？"></a>一、什么是三层架构？</h3><p>三层架构(3-tier architecture) 通常意义上的三层架构就是将整个业务应用划分为：<strong>界面层</strong>（User Interface layer）、<strong>业务逻辑层</strong>（Business Logic Layer）、<strong>数据访问层</strong>（Data access layer）。区分层次的目的即为了“高内聚低耦合”的思想。</p><p><img src="https://upload-images.jianshu.io/upload_images/7429691-61db35f6433809a2.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="三层架构.jpg"></p><p>通俗来讲就好像小朋友玩的积木一样，有一天，小朋友<strong>（客户）</strong>哭着要一个汽车玩具<strong>（界面层）</strong>，无奈家境一般，为了满足孩子的愿望，父亲就想了个办法，买了很多积木玩具块回来，妈妈按照汽车组装步骤图<strong>（业务层逻辑层）</strong>组装一个个积木块<strong>（数据访问层）</strong>最后变成了一个汽车玩具，因为小朋友<strong>（客户）</strong>的需求是千变万化的，五彩斑斓的黑五光十色的白都有这么一个可能性，哪天哭着闹着要个飞机玩具那也是合情合理的，但回归底层，还不都是一个个小小的积木<strong>（数据库）</strong>，世界上最不会变的那就是变化了，在客户第一的前提下，三层架构的提出是很重要也是不可或缺的。<br><img src="https://upload-images.jianshu.io/upload_images/7429691-4f3e14304e6a29fb.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="三层架构-积木类比"></p><h3 id="二、三层架构的优缺点"><a href="#二、三层架构的优缺点" class="headerlink" title="二、三层架构的优缺点"></a>二、三层架构的优缺点</h3><p>很明显，重构后对于整个项目一切都是可观的，优点显而易见，缺点也不可忽略，<strong>重构后的优点:</strong></p><p>1、<strong>结构清晰、耦合度低；</strong>结构更加的明确，可以降低层与层之间的依赖；开发人员可以只关注整个结构中的其中某一层；</p><p>2、<strong>可维护性高，可扩展性高；</strong>可以很容易的用新的实现来替换原有层次的实现；有利于标准化；在后期维护的时候，极大地降低了维护成本和维护时间</p><p>3、<strong>利于开发任务同步进行；</strong>容易适应需求变化，利于各层逻辑的复用。</p><p><strong>重构后可能面临的问题点:</strong></p><p>1、<strong>降低了系统的性能；</strong>这是不言而喻的。如果不采用分层式结构，很多业务可以直接造访数据库，以此获取相应的数据，如今却必须通过中间层来完成。</p><p>2、<strong>有时会导致级联的修改；</strong>这种修改尤其体现在自上而下的方向。如果在界面层中需要增加一个功能，为保证其设计符合分层式结构，可能需要在相应的业务逻辑层和数据访问层中都增加相应的代码。</p><p>3、<strong>增加了开发成本；</strong>这点是毋容置疑的事情，在人员上，本来需要两队人马完成的事情，现在需要三队人马；在时间上，三级联调，两个节点联调接口，需要的时间相比之前提高了。</p><p>然而公司重构项目从去年春节启动后到现在已有半年时间，在参与重构项目的开发过程中无疑是“不知庐山真面目，只缘身在此山”，持续不断的投入到业务开发和工作中，临近项目期末，现跳出围城进行知识上的扩展与升华，给出个人在参与项目过程中的一点思考与改进。</p><p>只有充分思考我们在实施项目的过程中的客观存在的问题，我们才能理性并合理的提出解决方案，我觉得有以下<strong>难点问题</strong>：</p><p>1、在需求不明确的情况下，产品和开发人员并行工作，产品输出远小于开发进度，从源头开始输入量小，下流前期输出量不多，拖到后期就导致功能开发紧张 。例如：到7月1号截止，优惠券活动审核的列表原型未出。</p><p>2、排查问题，怎样查能快速定位，找到原因，避免消耗人力过多。例如：前端说登陆不了，报系统错误，如何准确定位，解决问题。</p><p>3、前端、业务层、微服务三层架构中各层应用组件和技术相对前沿，在技术方面遇到的技术难点需要时间验证。例如：业务层在重构期间，经常出现模块节点挂的情况，经多次修改基础代码，各个模块均需要同步修改后的代码，消耗了一定时间。</p><p>4、顶层设计，错误码，子系统间衔接调用要先设计好。我们现在有但还不完美。</p><p>5、三层开发人员统一的开发进度规划，不能统一时间开发，当成流水线来安排。</p><h3 id="二、提高协作开发和联调效率"><a href="#二、提高协作开发和联调效率" class="headerlink" title="二、提高协作开发和联调效率"></a>二、提高协作开发和联调效率</h3><p><strong>产品同学：</strong></p><p>1、需求必须明确，反复确认需求细节，真正理解需求和内在价值。</p><p>2、确认需求后需要确认关联人员的开发时间点，按照紧急程度，精确到天或小时。</p><p><strong>开发同学：</strong></p><p>1、<strong>自测：</strong>业务层和微服务自测一波再给接口，不要那么随性地就将开发中的接口丢给前端。</p><p>2、<strong>沟通：</strong>在自测过后的接口来进行联调本来就存在出错的可能性，例如：数据错乱、请求头为空等情况，联调出错是一种非常正常的情况，在联调过程中，大家一定要戒骄戒躁，相互理解，及时沟通，积极反馈。由测试同学做主推动，逐层反馈，落实责任人，给出期望完成时间，问题责任人完成后反馈。</p><p>3、<strong>log日志：</strong>主要以业务层的报错与警告来解决问题，目前业务层规范了log日志输出，在测试同学接口报错的情况下，定位到某一个微服务的报错和报错原因。但不可避免的需要人力的排查问题所在。</p>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;p&gt;  今天我研究的课题《三层架构，如何提高协作开发和联调效率》，作为一名刚走出校园应届生，这一课题对我来说是即陌生又熟悉，对于三层架构的诞生、理论和优缺点，往深了讲，是我在校园和往期实习工作中尚未接触到的深水区，然而在当前重构项目中我却又是其中的一名实践者——业务层开发人员。半年来的实践与开发，在架构师的带领下，摸着石头过河，在今天这个课题下，写下我对三层架构的思考与提高联调的解决方案。本人才疏学浅，深知在后端开发领域知识面不够深不够广，对于课题写下自己的一点想法。&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="微服务" scheme="http://yoursite.com/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>我在东莞理工的大四生活</title>
    <link href="http://yoursite.com/2019/06/30/%E6%88%91%E5%9C%A8%E4%B8%9C%E8%8E%9E%E7%90%86%E5%B7%A5%E7%9A%84%E5%A4%A7%E5%9B%9B%E7%94%9F%E6%B4%BB/"/>
    <id>http://yoursite.com/2019/06/30/%E6%88%91%E5%9C%A8%E4%B8%9C%E8%8E%9E%E7%90%86%E5%B7%A5%E7%9A%84%E5%A4%A7%E5%9B%9B%E7%94%9F%E6%B4%BB/</id>
    <published>2019-06-30T08:04:17.000Z</published>
    <updated>2019-11-18T08:05:08.817Z</updated>
    
    <content type="html"><![CDATA[<p>转眼间，明天就是7月1号了，时间过得真是快，大学的美好时光就在收拾行囊离校的那一刻停止了，终将变成人生中一段回忆。毕业那晚，有人欢喜有人买醉，有人高歌有人沉默，有人无悔有人遗憾…终究是对大学的不舍。相比之下，我是幸运的。</p><p>我的大四可以说是五分之四时间不在学校，大四开学前的那个暑假我在学校附近的一家公司实习，然后到秋招的时候，我又跳到了广州一家公司，也就是我现在的这家。大四那年的宿舍对于我来说就像是一个补给站，一个临时靠岸停战的港湾。之所以怎么说，还是有一定原因的。可能是工作压力大，环境压抑，我需要一个释放天性自由的空间；可能是觉得大学剩余的时光不多，即使连夜跳伞我也要降落东莞。</p><a id="more"></a><p>从7月份到11月份，我在东莞松山湖一个老雇主那儿做一个大项目，作为一个入门级别的php后台开发人员，多好的一个练手的项目机会呀，尽管工资一般但满足我当时的生活足矣。在生活上，每天朝九晚五的工作，2路、5路、875、825的公交线路图到现在我还记忆犹新，只能逃了很多课，脱离了校园生活；在工作上，从零开始一个项目，产品原型、数据库设计、第三方平台对接、代码封装与开发、完稿这些从产品开发到生产的过程，我都跟着大佬走了一遍，虽然项目到后面凉掉了，但还是收获满满，赚了第一笔专业金；在情感上，有段小插曲，不愿展开说，额额额，至于为什么要有这个环节，可能是最近周围的人太多要结婚而自己还单着的原因吧。</p><p>从11月份到现在，因为我还在这家公司，所以不愿多说公司工作上的事情，客观上来说，996，少了不少头发，多了不少白发；主观上讲，996，有时累有时忙，有时动力十足有时信心满满…..有时只想好好过个双休则已经很满足了。先苦后甜嘛，只希望这样的日子在以后可以少一些，周末还能打个球跑个步，约几朋友出去玩玩，联络感情。<br>至于4、5月份的毕业设计，印象中并没有那么难过，论文每天上班下班前后一小时时间，一天一章节这个样子，写写改改，录制视频做ppt，然后对着校内老教授们吹水一波就这样吧。也没有那么难，大三的小伙伴们不用那么紧张，毕业这道坎其实很简单，出来社会后你会发现，每一个阶段都会有一个更大更坑的坎在等你…..哎，有苦说不清还是不说了。</p><p>在这里给即将大四和还没到大四的小伙伴们一点小建议：</p><p>1、别那么早出来干活，毕业后未来几十年的活很多你干不完的</p><p>2、趁着大学妹子还多的时候，能脱就别拖着，勇敢表白，别怂。</p><p>3、前两句都是幌子，我要说的是：少年，鸡汤喝多了容易中毒，脚底下的路要自己走出来的，五彩斑斓的黑，五光十色的白哦。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;转眼间，明天就是7月1号了，时间过得真是快，大学的美好时光就在收拾行囊离校的那一刻停止了，终将变成人生中一段回忆。毕业那晚，有人欢喜有人买醉，有人高歌有人沉默，有人无悔有人遗憾…终究是对大学的不舍。相比之下，我是幸运的。&lt;/p&gt;&lt;p&gt;我的大四可以说是五分之四时间不在学校，大四开学前的那个暑假我在学校附近的一家公司实习，然后到秋招的时候，我又跳到了广州一家公司，也就是我现在的这家。大四那年的宿舍对于我来说就像是一个补给站，一个临时靠岸停战的港湾。之所以怎么说，还是有一定原因的。可能是工作压力大，环境压抑，我需要一个释放天性自由的空间；可能是觉得大学剩余的时光不多，即使连夜跳伞我也要降落东莞。&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="大学" scheme="http://yoursite.com/tags/%E5%A4%A7%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>php面试基础知识--文件系统函数</title>
    <link href="http://yoursite.com/2019/05/22/php%E9%9D%A2%E8%AF%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0/"/>
    <id>http://yoursite.com/2019/05/22/php%E9%9D%A2%E8%AF%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0/</id>
    <published>2019-05-22T08:06:11.000Z</published>
    <updated>2019-11-18T08:07:17.800Z</updated>
    
    <content type="html"><![CDATA[<ul><li><strong>fopen( string $filename , string $mode) : resource</strong></li></ul><p>打开文件或者 URL，将 filename 指定的名字资源绑定到一个流上。<br>如果$filename指定的是本地的文件，就会在该文件上打开一个流，要确保该文件php有访问的权限。（权限问题，本地行，服务器不行系列）成功时返回文件指针资源，如果打开失败，本函数返回 FALSE。如果打开失败，会产生一个 <strong><code>E_WARNING</code></strong> 错误。可以通过 <a href="https://www.php.net/manual/zh/language.operators.errorcontrol.php" target="_blank" rel="noopener">@</a> 来屏蔽错误</p><a id="more"></a><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  $handle = fopen(<span class="string">"c:\\folder\\resource.txt"</span>, <span class="string">"wb"</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>fgets ( resource $handle [, int $length ] ) : string</strong></li></ul><p>从文件指针中读取一行,长度为$length - 1。 默认$length为1024，如果文件中的大多数行都大于 8KB，则在脚本中指定最大行的长度在利用资源上更为有效。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  $handle = @fopen(<span class="string">"/tmp/inputfile.txt"</span>, <span class="string">"r"</span>);</span><br><span class="line">  <span class="keyword">if</span> ($handle) &#123;</span><br><span class="line">      <span class="keyword">while</span> (($buffer = fgets($handle, <span class="number">4096</span>)) !== <span class="keyword">false</span>) &#123;</span><br><span class="line">          <span class="keyword">echo</span> $buffer;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (!feof($handle)) &#123;</span><br><span class="line">          <span class="keyword">echo</span> <span class="string">"Error: unexpected fgets() fail\n"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      fclose($handle);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>feof ( resource $handle ) : bool</strong></li></ul><p>测试文件指针是否到了文件结束的位。如果文件指针到了 EOF 或者出错时则返回 TRUE，否则返回一个错误（包括 socket 超时），其它情况则返回 FALSE。</p><ul><li><strong>fread ( resource $handle , int $length ) : string</strong></li></ul><p>读取文件（可安全用于二进制文件），当读取了 length 个字节和到达了文件末尾（EOF）时停止读取文件。<br><strong>注意：</strong><br>1、如果只是想将一个文件的内容读入到一个字符串中，用 <a href="https://www.php.net/manual/zh/function.file-get-contents.php" target="_blank" rel="noopener">file_get_contents()</a>，它的性能比上面的代码好得多。<br>2、fread（）从文件指针的当前位置读取。使用ftell（）查找指针的当前位置，使用rewind（）返回指针位置。</p><ul><li><strong>fclose ( resource $handle ) : bool</strong></li></ul><p>关闭一个已打开的文件指针。有始有终，开启了咱就一定要关闭。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  $handle = fopen(<span class="string">'somefile.txt'</span>, <span class="string">'r'</span>);</span><br><span class="line">  fclose($handle);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;strong&gt;fopen( string $filename , string $mode) : resource&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;打开文件或者 URL，将 filename 指定的名字资源绑定到一个流上。&lt;br&gt;如果$filename指定的是本地的文件，就会在该文件上打开一个流，要确保该文件php有访问的权限。（权限问题，本地行，服务器不行系列）成功时返回文件指针资源，如果打开失败，本函数返回 FALSE。如果打开失败，会产生一个 &lt;strong&gt;&lt;code&gt;E_WARNING&lt;/code&gt;&lt;/strong&gt; 错误。可以通过 &lt;a href=&quot;https://www.php.net/manual/zh/language.operators.errorcontrol.php&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;@&lt;/a&gt; 来屏蔽错误&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="php面试基础知识" scheme="http://yoursite.com/tags/php%E9%9D%A2%E8%AF%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>PHP7新特性</title>
    <link href="http://yoursite.com/2019/05/21/PHP7%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    <id>http://yoursite.com/2019/05/21/PHP7%E6%96%B0%E7%89%B9%E6%80%A7/</id>
    <published>2019-05-21T08:19:12.000Z</published>
    <updated>2019-11-18T08:19:59.698Z</updated>
    
    <content type="html"><![CDATA[<ul><li><strong>可为空（Nullable）类型</strong></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">testReturn</span><span class="params">()</span> : ? <span class="title">string</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'elePHPant'</span>; <span class="comment">//  elePHPant</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">(?string $name)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">      var_dump($name);  <span class="comment">//  null</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><a id="more"></a><p>就如testeturn()函数一样，要么返回给定类型，要么返回null，其他则报错。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Uncaught Error: Too few arguments to <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span>, 0 <span class="title">passed</span> <span class="title">in</span>...</span></span><br></pre></td></tr></table></figure><ul><li><strong>void函数</strong></li></ul><p>一个新的返回值类型void被引入。 返回值声明为 void 类型的方法要么干脆省去 return 语句，要么使用一个空的 return 语句。 对于 void 函数来说，NULL 不是一个合法的返回值。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span><span class="params">(&amp;$left, &amp;$right)</span> : <span class="title">void</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($left === $right) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $tmp = $left;</span><br><span class="line">    $left = $right;</span><br><span class="line">    $right = $tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a = <span class="number">1</span>;</span><br><span class="line">$b = <span class="number">2</span>;</span><br><span class="line">var_dump(swap($a, $b), $a, $b);  <span class="comment">//null int(2) int(1)</span></span><br></pre></td></tr></table></figure><ul><li><strong>list()支持键名</strong></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$data = [</span><br><span class="line">    [<span class="string">"id"</span> =&gt; <span class="number">1</span>, <span class="string">"name"</span> =&gt; <span class="string">'Tom'</span>],</span><br><span class="line">    [<span class="string">"id"</span> =&gt; <span class="number">2</span>, <span class="string">"name"</span> =&gt; <span class="string">'Fred'</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// list() style</span></span><br><span class="line"><span class="keyword">list</span>(<span class="string">"id"</span> =&gt; $id1, <span class="string">"name"</span> =&gt; $name1) = $data[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// [] style</span></span><br><span class="line">[<span class="string">"id"</span> =&gt; $id1, <span class="string">"name"</span> =&gt; $name1] = $data[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// list() style</span></span><br><span class="line"><span class="keyword">foreach</span> ($data <span class="keyword">as</span> <span class="keyword">list</span>(<span class="string">"id"</span> =&gt; $id, <span class="string">"name"</span> =&gt; $name)) &#123;</span><br><span class="line">    <span class="comment">// logic here with $id and $name</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// [] style</span></span><br><span class="line"><span class="keyword">foreach</span> ($data <span class="keyword">as</span> [<span class="string">"id"</span> =&gt; $id, <span class="string">"name"</span> =&gt; $name]) &#123;</span><br><span class="line">    <span class="comment">// logic here with $id and $name</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;strong&gt;可为空（Nullable）类型&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;testReturn&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; : ? &lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;  &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;elePHPant&#39;&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;//  elePHPant&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(?string $name)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;  &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      var_dump($name);  &lt;span class=&quot;comment&quot;&gt;//  null&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
      <category term="php面试基础知识" scheme="http://yoursite.com/tags/php%E9%9D%A2%E8%AF%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>微信消息加解密Mcrypt在php7.2中废弃与open_ssl替代解决方案</title>
    <link href="http://yoursite.com/2019/05/21/%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E5%8A%A0%E8%A7%A3%E5%AF%86Mcrypt%E5%9C%A8php7-2%E4%B8%AD%E5%BA%9F%E5%BC%83%E4%B8%8Eopen-ssl%E6%9B%BF%E4%BB%A3%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <id>http://yoursite.com/2019/05/21/%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E5%8A%A0%E8%A7%A3%E5%AF%86Mcrypt%E5%9C%A8php7-2%E4%B8%AD%E5%BA%9F%E5%BC%83%E4%B8%8Eopen-ssl%E6%9B%BF%E4%BB%A3%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</id>
    <published>2019-05-21T07:59:25.000Z</published>
    <updated>2019-11-18T08:00:44.312Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p>之前在接入微信公众号相关的接口，对微信消息加解密操作时，下载了官网上的php demo下来。<br><img src="https://upload-images.jianshu.io/upload_images/7429691-f525e810b01d6592.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>没想到的是，官网的php代码居然使用着php7废弃的函数<strong>Mcrypt</strong>，这就导致了使用了php7.2及以上的版本程序上报错。<br><img src="https://upload-images.jianshu.io/upload_images/7429691-cfa8ce1935cd2472.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>然后就使用了open_ssl替代解决方案。以下是更新后的<strong>pkcs7Encoder.php</strong>文件代码</p><a id="more"></a><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">"errorCode.php"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * PKCS7Encoder class</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 提供基于PKCS7算法的加解密接口.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PKCS7Encoder</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> $block_size = <span class="number">32</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对需要加密的明文进行填充补位</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $text 需要进行填充补位操作的明文</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 补齐明文字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encode</span><span class="params">($text)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">$block_size = PKCS7Encoder::$block_size;</span><br><span class="line">$text_length = strlen($text);</span><br><span class="line"><span class="comment">//计算需要填充的位数</span></span><br><span class="line">$amount_to_pad = PKCS7Encoder::$block_size - ($text_length % PKCS7Encoder::$block_size);</span><br><span class="line"><span class="keyword">if</span> ($amount_to_pad == <span class="number">0</span>) &#123;</span><br><span class="line">$amount_to_pad = PKCS7Encoder::block_size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//获得补位所用的字符</span></span><br><span class="line">$pad_chr = chr($amount_to_pad);</span><br><span class="line">$tmp = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">for</span> ($index = <span class="number">0</span>; $index &lt; $amount_to_pad; $index++) &#123;</span><br><span class="line">$tmp .= $pad_chr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> $text . $tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对解密后的明文进行补位删除</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> decrypted 解密后的明文</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 删除填充补位后的明文</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">decode</span><span class="params">($text)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">$pad = ord(substr($text, <span class="number">-1</span>));</span><br><span class="line"><span class="keyword">if</span> ($pad &lt; <span class="number">1</span> || $pad &gt; <span class="number">32</span>) &#123;</span><br><span class="line">$pad = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> substr($text, <span class="number">0</span>, (strlen($text) - $pad));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Prpcrypt class</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 提供接收和推送给公众平台消息的加解密接口.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Prpcrypt</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="keyword">public</span> $key;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">$this</span>-&gt;key = base64_decode($k . <span class="string">"="</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对明文进行加密</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $text 需要加密的明文</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string 加密后的密文</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">encrypt</span><span class="params">($text, $appid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获得16位随机字符串，填充到明文之前</span></span><br><span class="line">            $random = <span class="keyword">$this</span>-&gt;getRandomStr();</span><br><span class="line">            $text = $random . pack(<span class="string">"N"</span>, strlen($text)) . $text . $appid;</span><br><span class="line"></span><br><span class="line">            $iv = substr(<span class="keyword">$this</span>-&gt;key, <span class="number">0</span>, <span class="number">16</span>);</span><br><span class="line">            <span class="comment">//使用自定义的填充方式对明文进行补位填充</span></span><br><span class="line">            $pkc_encoder = <span class="keyword">new</span> PKCS7Encoder;</span><br><span class="line">            $text = $pkc_encoder-&gt;encode($text);</span><br><span class="line">            $encrypted = openssl_encrypt($text, <span class="string">'AES-256-CBC'</span>, <span class="keyword">$this</span>-&gt;key, OPENSSL_RAW_DATA, $iv);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">array</span>(ErrorCode::$OK, base64_encode($encrypted));</span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="keyword">Exception</span> $e) &#123;</span><br><span class="line"><span class="comment">//print $e;</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">array</span>(ErrorCode::$EncryptAESError, <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对密文进行解密</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $encrypted 需要解密的密文</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string 解密得到的明文</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">decrypt</span><span class="params">($encrypted, $appid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">            $iv = substr(<span class="keyword">$this</span>-&gt;key, <span class="number">0</span>, <span class="number">16</span>);</span><br><span class="line"><span class="comment">//使用BASE64对需要解密的字符串进行解码</span></span><br><span class="line">            $decrypted = openssl_decrypt(base64_decode($encrypted), <span class="string">'AES-256-CBC'</span>, <span class="keyword">$this</span>-&gt;key, OPENSSL_RAW_DATA, $iv);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="keyword">Exception</span> $e) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">array</span>(ErrorCode::$DecryptAESError, <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//去除补位字符</span></span><br><span class="line">$pkc_encoder = <span class="keyword">new</span> PKCS7Encoder;</span><br><span class="line">$result = $pkc_encoder-&gt;decode($decrypted);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//去除16位随机字符串,网络字节序和AppId</span></span><br><span class="line"><span class="keyword">if</span> (strlen($result) &lt; <span class="number">16</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">$content = substr($result, <span class="number">16</span>, strlen($result));</span><br><span class="line">$len_list = unpack(<span class="string">"N"</span>, substr($content, <span class="number">0</span>, <span class="number">4</span>));</span><br><span class="line">$xml_len = $len_list[<span class="number">1</span>];</span><br><span class="line">$xml_content = substr($content, <span class="number">4</span>, $xml_len);</span><br><span class="line">$from_appid = substr($content, $xml_len + <span class="number">4</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="keyword">Exception</span> $e) &#123;</span><br><span class="line"><span class="comment">//print $e;</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">array</span>(ErrorCode::$IllegalBuffer, <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> ($from_appid != $appid)</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">array</span>(ErrorCode::$ValidateAppidError, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">array</span>(<span class="number">0</span>, $xml_content);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 随机生成16位字符串</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string 生成的字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandomStr</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">$str = <span class="string">""</span>;</span><br><span class="line">$str_pol = <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz"</span>;</span><br><span class="line">$max = strlen($str_pol) - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; <span class="number">16</span>; $i++) &#123;</span><br><span class="line">$str .= $str_pol[mt_rand(<span class="number">0</span>, $max)];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> $str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><strong>方法步骤</strong></p><p>1、居然是php的加密扩展，自然是先安装openssl扩展，不过一般都有安装（命令php -m可查看）<br><img src="https://upload-images.jianshu.io/upload_images/7429691-2a1323bda9cb8dfb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>2、查看php官网开发文档<a href="https://www.php.net/manual/zh/function.openssl-encrypt.php" target="_blank" rel="noopener">openssl</a>，看看各个参数的含义与使用方法。当然上面是已经写好的且验证通过的代码，可拿来即用。<br><img src="https://upload-images.jianshu.io/upload_images/7429691-d74eb54dedcb6fdd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;&lt;p&gt;之前在接入微信公众号相关的接口，对微信消息加解密操作时，下载了官网上的php demo下来。&lt;br&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-f525e810b01d6592.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;&gt;&lt;br&gt;没想到的是，官网的php代码居然使用着php7废弃的函数&lt;strong&gt;Mcrypt&lt;/strong&gt;，这就导致了使用了php7.2及以上的版本程序上报错。&lt;br&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7429691-cfa8ce1935cd2472.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;&lt;p&gt;然后就使用了open_ssl替代解决方案。以下是更新后的&lt;strong&gt;pkcs7Encoder.php&lt;/strong&gt;文件代码&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="微信" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1/"/>
    
  </entry>
  
  <entry>
    <title>程序员工作5年， 给小萌新的建议</title>
    <link href="http://yoursite.com/2019/05/20/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%B7%A5%E4%BD%9C5%E5%B9%B4%EF%BC%8C-%E7%BB%99%E5%B0%8F%E8%90%8C%E6%96%B0%E7%9A%84%E5%BB%BA%E8%AE%AE/"/>
    <id>http://yoursite.com/2019/05/20/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%B7%A5%E4%BD%9C5%E5%B9%B4%EF%BC%8C-%E7%BB%99%E5%B0%8F%E8%90%8C%E6%96%B0%E7%9A%84%E5%BB%BA%E8%AE%AE/</id>
    <published>2019-05-20T08:20:17.000Z</published>
    <updated>2019-11-18T08:21:01.197Z</updated>
    
    <content type="html"><![CDATA[<p>周末，我有一个同事（实习生）拍毕业照了，应部门大佬的邀请一块到佛山科技技术学院走走玩玩，然而我还是太年轻了，程序员之间的聊天打开方式还是离不开技术。做为一个php实习生，在谈话中，我被大佬问倒过好几个问题，有算法的，有语言底层实现的。在这个“上级”对“下级”的这场搏击中，我还是太菜了。大佬还是大佬，在交谈中，我总结大佬所传授的为以下几点：</p><a id="more"></a><ul><li><strong>“你们（实习生）要想走得远，有四个基础点，你必须要理解并用于实践中：操作系统、计算机网络、数据结构与算法、掌握一门编程语言”</strong></li></ul><p>在谈话中，大佬并没有详细的指出四点的详细内容，重要性你我都知。在大学学习中，这些都是我们的基础和核心课程，也是我们当代大学会教的东西。新的技术学校教不了，老的学了也过时，只有这些基础核心课程，才是我们在学习必须理解并自己应用实践的。也许，看到这篇文字的你还是一个大学生，觉得这些课程枯燥乏味还没法做出一个应用，学了就只是为了应付考试及格，那你就真的大错特错了；也许，你是一个在职的程序员，觉得在实际业务逻辑开发中这些东西也没那么重要，那当你遇到内存泄漏溢出你是要咋办呢？在我的理解中，它们就像是高楼大厦下的地基，基础打好了，楼也就稳了，科技在不断进步，以后不管是遇到什么样的大风大浪大地震，总有解决的办法。</p><ul><li><strong>“php语言这条路很广，但天花板很低”</strong></li></ul><p>有那么一句调侃的话是这样说的“php是世界上最好的语言”，起初我还以为php这门语言真的很“好”（简单易学快上手），后来我才发现这其实是phper的一种自嘲。大佬说：“php语言很弱，它的容错机制决定一个好的程序员和一个坏的程序员开发出来代码效果的差不多的（java也是），这也是为什么java和php在市场上的需求和就业高与其他开发语言（node.js等）”，虽然php7出了很多新的特性，php版本更新还算频繁，加上现在比较热门的高性能的php swoole扩展，也有几个用swoole扩展封装的框架（easyswoole等），总的来说，这门语言是在不断的成长和变好的，开发网站业务是最适合效率最高最满足现在企业需求的。尽管如此，它还是会有很多缺陷与不足，具体的这个还是留个坑给自己以后再填吧。</p><p>在最后出一道题考考大家，可以把答案在下方留言哦</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//问题</span></span><br><span class="line">x = <span class="number">1</span>;</span><br><span class="line">z = x++;</span><br><span class="line">y = ++x;</span><br><span class="line"><span class="comment">//答案</span></span><br><span class="line">x = ?;</span><br><span class="line">y = ?;</span><br><span class="line">z = ?;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;周末，我有一个同事（实习生）拍毕业照了，应部门大佬的邀请一块到佛山科技技术学院走走玩玩，然而我还是太年轻了，程序员之间的聊天打开方式还是离不开技术。做为一个php实习生，在谈话中，我被大佬问倒过好几个问题，有算法的，有语言底层实现的。在这个“上级”对“下级”的这场搏击中，我还是太菜了。大佬还是大佬，在交谈中，我总结大佬所传授的为以下几点：&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="程序员" scheme="http://yoursite.com/tags/%E7%A8%8B%E5%BA%8F%E5%91%98/"/>
    
  </entry>
  
  <entry>
    <title>php面试基础知识--数组函数（二）</title>
    <link href="http://yoursite.com/2019/05/19/php%E9%9D%A2%E8%AF%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E6%95%B0%E7%BB%84%E5%87%BD%E6%95%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <id>http://yoursite.com/2019/05/19/php%E9%9D%A2%E8%AF%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E6%95%B0%E7%BB%84%E5%87%BD%E6%95%B0%EF%BC%88%E4%BA%8C%EF%BC%89/</id>
    <published>2019-05-19T08:21:19.000Z</published>
    <updated>2019-11-18T08:22:58.943Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p><strong>array_keys() : array</strong></p><p>返回数组中的数字或者字符串的部分或全部键名；第二个参数为输入<strong>键值</strong>则只返回该值的<strong>键名</strong>，例：</p></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $array = [</span><br><span class="line">        <span class="string">'a'</span> =&gt;  <span class="string">'1'</span>,</span><br><span class="line">        <span class="string">'b'</span> =&gt;  <span class="string">'2'</span>,</span><br><span class="line">        <span class="string">'c'</span> =&gt;  <span class="string">'3'</span></span><br><span class="line">    ];</span><br><span class="line">    var_dump(array_keys($array));  <span class="comment">//array('a', 'b', 'c');</span></span><br><span class="line">    var_dump(array_keys($array, <span class="string">'a'</span>));  <span class="comment">//null</span></span><br><span class="line">    var_dump(array_keys($array, <span class="string">'1'</span>));  <span class="comment">//array('a');</span></span><br></pre></td></tr></table></figure><a id="more"></a><ul><li><strong>array_values() : array</strong></li></ul><p>返回数组中所有的值并给其建立数字索引，这个简单些没遇到什么坑。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $array = [</span><br><span class="line">        <span class="string">'a'</span> =&gt;  <span class="string">'1'</span>,</span><br><span class="line">        <span class="string">'b'</span> =&gt;  <span class="string">'2'</span>,</span><br><span class="line">        <span class="string">'c'</span> =&gt;  <span class="string">'3'</span></span><br><span class="line">    ];</span><br><span class="line">    var_dump(array_values($array));  <span class="comment">//array('1', '2', '3');</span></span><br></pre></td></tr></table></figure><ul><li><strong>array_diff ( array $array1 , array $array2 [, array $… ] ) : array</strong></li></ul><p><strong>差集：</strong>对比 array1 和其他一个或者多个数组，返回在 array1 中但是不在其他 array 里的值。</p><p><strong>注意：</strong>返回键名保留不变，且函数只检查了多维数组中的一维</p><ul><li><strong>array_diff_assoc() : array</strong></li></ul><p>与array_diff ()不同的地方在于，<strong>这个家伙键名也用于比较</strong>。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  $array1 = <span class="keyword">array</span>(<span class="string">"a"</span> =&gt; <span class="string">"green"</span>, <span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"red"</span>);</span><br><span class="line">  $array2 = <span class="keyword">array</span>(<span class="string">"a"</span> =&gt; <span class="string">"green"</span>, <span class="string">"yellow"</span>, <span class="string">"red"</span>);</span><br><span class="line">  $result1 = array_diff($array1, $array2);</span><br><span class="line">  $result2 = array_diff_assoc($array1, $array2);</span><br><span class="line">  print_r($result1);</span><br><span class="line">  print_r($result2);</span><br><span class="line">  <span class="comment">//返回结果</span></span><br><span class="line">  <span class="keyword">Array</span></span><br><span class="line">  (</span><br><span class="line">      [<span class="number">1</span>] =&gt; blue</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">Array</span></span><br><span class="line">  (</span><br><span class="line">      [<span class="number">0</span>] =&gt; red</span><br><span class="line">      [<span class="number">1</span>] =&gt; blue</span><br><span class="line">      [<span class="number">2</span>] =&gt; red</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>array_intersect ( array $array1 , array $array2 [, array $… ] ) : array</strong></li></ul><p><strong>交集：</strong>返回一个数组，该数组包含了所有在 array1 中也同时出现在所有其它参数数组中的值。<br><strong>注意：</strong>键名保留不变。</p><ul><li><strong>array_intersect_assoc() : array</strong></li></ul><p>与array_intersect ()不同的地方在于，<strong>这个家伙键名也用于比较</strong>。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $array1 = <span class="keyword">array</span>(<span class="string">"a"</span> =&gt; <span class="string">"green"</span>, <span class="string">"b"</span> =&gt; <span class="string">"brown"</span>, <span class="string">"c"</span> =&gt; <span class="string">"blue"</span>, <span class="string">"red"</span>);</span><br><span class="line">    $array2 = <span class="keyword">array</span>(<span class="string">"a"</span> =&gt; <span class="string">"green"</span>, <span class="string">"b"</span> =&gt; <span class="string">"yellow"</span>, <span class="string">"blue"</span>, <span class="string">"red"</span>);</span><br><span class="line">    $result_array1 = array_intersect($array1, $array2);</span><br><span class="line">    $result_array2 = array_intersect_assoc($array1, $array2);</span><br><span class="line">    print_r($result_array1);</span><br><span class="line">    print_r($result_array2);</span><br><span class="line">    <span class="comment">//返回结果</span></span><br><span class="line">    <span class="keyword">Array</span></span><br><span class="line">    (</span><br><span class="line">        [a] =&gt; green</span><br><span class="line">        [c] =&gt; blue</span><br><span class="line">        [<span class="number">0</span>] =&gt; red</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">Array</span></span><br><span class="line">    (</span><br><span class="line">        [a] =&gt; green</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;array_keys() : array&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;返回数组中的数字或者字符串的部分或全部键名；第二个参数为输入&lt;strong&gt;键值&lt;/strong&gt;则只返回该值的&lt;strong&gt;键名&lt;/strong&gt;，例：&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $array = [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;a&#39;&lt;/span&gt; =&amp;gt;  &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;b&#39;&lt;/span&gt; =&amp;gt;  &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;c&#39;&lt;/span&gt; =&amp;gt;  &lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var_dump(array_keys($array));  &lt;span class=&quot;comment&quot;&gt;//array(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var_dump(array_keys($array, &lt;span class=&quot;string&quot;&gt;&#39;a&#39;&lt;/span&gt;));  &lt;span class=&quot;comment&quot;&gt;//null&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var_dump(array_keys($array, &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;));  &lt;span class=&quot;comment&quot;&gt;//array(&#39;a&#39;);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
      <category term="php面试基础知识" scheme="http://yoursite.com/tags/php%E9%9D%A2%E8%AF%95%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
</feed>
